
dist: bionic
language: generic

env:
  global:
    GIT_BRANCH: master


notifications:
  slack:
    secure: PrsOsR+R852eJ4VCO7hwhf8b+U9V4Oi30ge2/1xGfFO4cCr/G6sSrwckm+ahkDvKHKRG/h73qEj03+wzJxv/g/rE6rw+RVGVExOms9phWu5ellVoLC9/P6kfNkD+poTnHsK7FgdrJE7wwJ7V4Be8digiVbOntlZCJ8ryZemG8PTUWg6rOj7xYdLr3wFZtf5YFnGfGg6PMjSPnfBPzUP1E6l1Sv+HeETP9HBexPIIvH1vz59e54LYWVyK7aYxgfsuL6ejcqbxR0FtSeAedDt6+r1vMBOL7RZlBihf8BhEb5411icqXzYnUS/1zFXjvFI3KChjdeylQ3oczODAbnmKuEPV7DCRe/SYY2Nyshr5Pw3E1AopR0rET/qyGxpgeLevOrxrNqTMNokZHpUE8NkbAOKIkYR7yD9Jh2synr4UR/QDknToc5iZ6PThuqJko8UXq6UVRNbNzHxnQmc4Rpy7iKD8HHbr9lBdRT287rZ/cuw2MHpDgI66BR8YpMpkUjuaibbs++W74nLlrejRApCsycWsrEuGv+7qylB8boHYCrp+qtcq+qPcvLrL3ncH21TjrOAF1oaJgmqZd63maqEvTt4pRqPtQjD8MhXPk1sqXI46Eg6bJ2GSRN+V2AtWCGnJmTz7Fp0jbU9Br1ZVbOckM/5Qp2luufNCFukpZUCcBQg=
    on_success: always # default: change
    on_failure: always # default: alway
    template:
      - - "Repo `%{repository_slug}` *%{result}* build (<%{build_url}|#%{build_number}>) for commit (<%{compare_url}|%{commit}>) on branch `%{branch}` by `%{author}`."
      - "Execution time: *%{duration}*"
      - "Message: %{message}"
  email:
    on_success: never # default: change
    on_failure: never # default: alway


jobs:
    include:
        - stage: "Check the exitence of important files in Master branch"
          name: "RASD.pdf & DD.pdf"
          script:
              - for f in RASD/RASD-*.pdf; do [ -e "$f" ] && return 0 || return ; break ;done
              - for f in DeliveryFolder/RASD_*.pdf; do [ -e "$f" ] && return 0 || return ; break ;done
              - for f in DD/DD-*.pdf; do [ -e "$f" ] && return 0 || return ; break ;done
              - for f in DeliveryFolder/DD_*.pdf; do [ -e "$f" ] && return 0 || return ; break ;done
        - stage: GitHub Release
          before_deploy:
            - git config --local user.name "Deploy BOT"
            - git config --local user.email "Iambot@hoho.bot"
            - export TRAVIS_TAG=${TRAVIS_TAG:-$(date +'Y%YM%mD%dH%HM%MS%S')}
            - git tag $TRAVIS_TAG

          deploy:
            provider: releases
            api_key:
              secure: HEiedeK5dd7ig88bNf8Xn3xgLzU3u73tWW+taVz9ISqkW0ueRISwJW6ojd8+zabuQmEcqSRyVtoOtRL+/g0bzNrtmt/NfCzju9ipACvoVsS/GU3hWHkqBjGCGNZQ9OS9WIvfgSs9UBymKUjqR3YRYqbB1DJyxm7Jo5MAEwzS7kuAAeI101Xho4fVqUfp1evLOrtwgS57KKYBt88hnf+55nXMBaKe3KA6pszbtSeOaAi/EHSR4DFkLpnBAZ8Q6iF8CYdZgNyb5VG6mIZV8isVId57fOkEbgyySHf1UbJFijGhjitsiaB9j/Hazj13IhvrI4DJyCxGy3EUb4+okwixetBbjtksrcW1TdZy3uydf7LYHcWxuIGPicKZ+tN0Tg9GDMkDjSdYxTwWvGCP8kHt6ykwiOiVPtLcgLzT1U8JvGh+c7VBbNMUbos4u98yZjiPsU2OQoHzY26yym5o0BEaNz9b01+XGcNRnpWynurzKsaqQdm9qnML/VQvJAbfTxoWWq1WsEXA7PazFGRY24sjkINBG14UyHSuKr1Q5/pmrLAxoG2bGlV54qVOXM/TCsfKBsbziwSi28NLbrAMtcdl8MpFj74ZNOmWR4xT5m4gAj4ipEFdhL7PmmgY9OusV20Iih4DmH/kLyCYtjM1f3p9AdGt0nQ4L54PiFYuZKkyMjE=
            file_glob: true
            file: "DeliveryFolder/*_*.pdf"
            skip_cleanup: true
            on:
              repo: karim-zakaria/MolaeiRahnemoonSaloma
              branch: ''
